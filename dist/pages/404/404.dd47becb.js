function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequire938d;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequire938d=i),i.register("8xboN",(function(t,n){e(t.exports,"default",(()=>d));var r=i("fexr3"),s=i("5sKyw"),o=i("c1JL1");class a{constructor(e="div",t={},n={}){this._element=null,this._id=null,this._meta=null,this.children={},this.setProps=e=>{e&&(Object.assign(this.props,e),this.eventBus().emit(a.EVENTS.FLOW_CDU))};const{children:i,props:o}=this._getChildren(t);this.children=i;const d=new r.default;this._meta={tagName:e,props:o,settings:n};const{withInternalID:c}=n;c?(this._id=s.default(),this.props=this._makePropsProxy({...o,__id:this._id})):this.props=this._makePropsProxy(o),this.eventBus=()=>d,this._registerEvents(d),d.emit(a.EVENTS.INIT)}_registerEvents(e){e.on(a.EVENTS.INIT,this.init.bind(this)),e.on(a.EVENTS.FLOW_CDM,this._componentDidMount.bind(this)),e.on(a.EVENTS.FLOW_CDU,this._componentDidUpdate.bind(this)),e.on(a.EVENTS.FLOW_RENDER,this._render.bind(this))}_createResources(){const{tagName:e,settings:{className:t}}=this._meta;this._element=this._createDocumentElement(e,t)}init(){this._createResources(),this.eventBus().emit(a.EVENTS.FLOW_RENDER)}_componentDidMount(){this.componentDidMount(),Object.values(this.children).forEach((e=>{e.dispatchComponentDidMount()}))}componentDidMount(e){console.log("did mount, props:",e)}dispatchComponentDidMount(){this._eventBus().emit(a.EVENTS.FLOW_CDM)}_componentDidUpdate(e,t){this.componentDidUpdate(e,t)}componentDidUpdate(e,t){return!0}get element(){return this._element}_render(){const e=this.render();this._removeEvents(),"string"==typeof e?this._element.innerHTML=e:this._element.appendChild(e.content),this._addEvents()}render(){return this.element}getContent(){return this.element}compile(e,t){const n={...t};Object.entries(this.children).forEach((([e,t])=>{Array.isArray(t)?n[e]=t.reduce(((e,t)=>e+`<div data-id="${t._id}"></div>`),""):n[e]=`<div data-id="${t._id}"></div>`}));const r=document.createElement("template"),i=o.compile(e);return r.innerHTML=i(n),Object.values(this.children).forEach((e=>{if(Array.isArray(e))e.forEach((e=>{r.content.querySelector(`[data-id="${e._id}"]`).replaceWith(e.getContent())}));else{r.content.querySelector(`[data-id="${e._id}"]`).replaceWith(e.getContent())}})),r}_makePropsProxy(e){const t=this;return new Proxy(e,{set:(e,n,r)=>(e[n]=r,t._render(),!0),deleteProperty(){throw new Error("Удаление запрещено")}})}_createDocumentElement(e,t){const{attributes:n}=this._meta.settings,r=document.createElement(e);return n&&Object.entries(n).forEach((([e,t])=>{r.setAttribute(e,String(t))})),t&&"string"==typeof t&&r.classList.add(t),Array.isArray(t)&&t.forEach((e=>{r.classList.add(e)})),this._id&&r.setAttribute("data-id",this._id),r}_addEvents(){const{events:e={}}=this.props;Object.keys(e).forEach((t=>{this._element.addEventListener(t,e[t],!0)}))}_removeEvents(){const{events:e={}}=this.props;Object.keys(e).forEach((t=>{this._element.removeEventListener(t,e[t])}))}_getChildren(e){const t={},n={};return Object.entries(e).forEach((([e,r])=>{const i=r instanceof a,s=Array.isArray(r)&&r[0]&&r[0]instanceof a;i||s?t[e]=r:n[e]=r})),{children:t,props:n}}show(){this.getContent().style.display="block"}hide(){this.getContent().style.display="none"}}a.EVENTS={INIT:"init",FLOW_CDM:"flow:component-did-mount",FLOW_RENDER:"flow:render",FLOW_CDU:"flow:component-did-update"};var d=a})),i.register("fexr3",(function(t,n){e(t.exports,"default",(()=>r));var r=class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){if(!this.listeners[e])throw new Error(`Нет события: ${e}`);this.listeners[e]=this.listeners[e].filter((e=>e!==t))}emit(e,...t){if(!this.listeners[e])throw new Error(`Нет события: ${e}`);this.listeners[e].forEach((e=>{e(...t)}))}}})),i.register("5sKyw",(function(t,n){e(t.exports,"default",(()=>o));var r=i("7qKRb"),s=i("2uohp");var o=function(e,t,n){var i=(e=e||{}).random||(e.rng||r.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=i[o];return t}return s.default(i)}})),i.register("7qKRb",(function(t,n){var r;e(t.exports,"default",(()=>s));var i=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}})),i.register("2uohp",(function(t,n){e(t.exports,"default",(()=>a));for(var r=i("64ZUg"),s=[],o=0;o<256;++o)s.push((o+256).toString(16).substr(1));var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!r.default(n))throw TypeError("Stringified UUID is invalid");return n}})),i.register("64ZUg",(function(t,n){e(t.exports,"default",(()=>s));var r=i("4meF0");var s=function(e){return"string"==typeof e&&r.default.test(e)}})),i.register("4meF0",(function(t,n){e(t.exports,"default",(()=>r));var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i}));
//# sourceMappingURL=404.dd47becb.js.map
